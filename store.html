<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store - NeedTwoGo</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    animation: {
                        'bounce-slow': 'bounce 3s infinite',
                        'fade-in-up': 'fadeInUp 0.3s ease-out forwards',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' }, 
                        }
                    }
                }
            }
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #10b981; }
    </style>
</head>
<body class="bg-slate-950 text-slate-100 font-sans selection:bg-emerald-500 selection:text-white overflow-x-hidden relative min-h-screen">

    <!-- LOGIN GATE OVERLAY -->
    <div id="auth-gate" class="fixed inset-0 z-[100] bg-slate-950/90 backdrop-blur-md flex items-center justify-center p-4 transition-all duration-500">
        <div class="max-w-md w-full max-h-[90vh] overflow-y-auto bg-slate-900 rounded-2xl border border-white/10 shadow-2xl p-8 text-center transform transition-all hover:scale-[1.01] animate-fade-in-up">
            <div class="relative w-24 h-24 mx-auto mb-6">
                <div class="absolute inset-0 bg-emerald-500/20 rounded-full animate-pulse"></div>
                <img src="https://n2g.my.id/asset/server-icon2.png" class="relative w-full h-full rounded-xl object-cover border-2 border-emerald-500/30 shadow-[0_0_20px_rgba(16,185,129,0.2)]">
            </div>
            
            <h2 class="text-3xl font-extrabold text-white mb-2 tracking-tight">NeedTwoGo Store</h2>
            <p class="text-slate-400 mb-8 text-sm leading-relaxed px-4">
                Masukkan username Minecraft kamu untuk mengakses katalog, membeli rank, dan melihat penawaran spesial.
            </p>
            
            <div class="space-y-4">
                <div class="relative group">
                    <div class="absolute -inset-0.5 bg-gradient-to-r from-emerald-600 to-teal-600 rounded-lg blur opacity-30 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"></div>
                    <input type="text" id="gate-username-input" 
                        class="relative w-full bg-slate-950 border border-slate-700 rounded-lg px-5 py-4 text-white text-lg focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all placeholder:text-slate-600 font-bold text-center tracking-wide" 
                        placeholder="Username Minecraft"
                        onkeypress="if(event.key === 'Enter') handleGateLogin()">
                </div>
                
                <button onclick="handleGateLogin()" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-emerald-900/40 transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2 group">
                    <span>Masuk Sekarang</span>
                    <i data-lucide="arrow-right" class="w-5 h-5 group-hover:translate-x-1 transition-transform"></i>
                </button>
            </div>

            <div class="mt-8 pt-6 border-t border-white/5">
                <a href="index.html" class="text-slate-500 hover:text-white text-sm font-medium transition-colors flex items-center justify-center gap-2">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i> Kembali ke Halaman Utama
                </a>
            </div>
        </div>
    </div>

    <!-- WRAPPER FOR MAIN APP -->
    <div id="app-container" class="flex flex-col min-h-screen transition-all duration-500 filter blur-sm pointer-events-none opacity-50">
        
        <!-- Navigation -->
        <nav class="fixed top-0 w-full z-50 border-b border-white/10 bg-slate-950/80 backdrop-blur-md">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    <!-- Logo -->
                    <div class="flex-shrink-0 flex items-center gap-2 cursor-pointer" onclick="window.location.href='index.html'">
                        <img src="https://n2g.my.id/asset/server-icon2.png" alt="Server Icon" class="w-10 h-10 rounded-lg object-cover">
                        <span class="font-bold text-xl tracking-wider text-slate-100">NeedTwoGo</span>
                    </div>

                    <!-- Desktop Menu -->
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-8">
                            <a href="index.html" class="hover:text-emerald-400 transition-colors px-3 py-2 rounded-md text-sm font-medium tracking-wide uppercase">Home</a>
                            <a href="#" onclick="filterCategory('ranks')" class="text-emerald-400 px-3 py-2 rounded-md text-sm font-bold tracking-wide uppercase border-b-2 border-emerald-500">Store</a>
                            <!-- Updated Support Link -->
                            <a href="#" onclick="filterCategory('support')" class="hover:text-emerald-400 transition-colors px-3 py-2 rounded-md text-sm font-medium tracking-wide uppercase">Support</a>
                        </div>
                    </div>

                    <!-- Cart / Auth Desktop -->
                    <div class="hidden md:flex items-center gap-4">
                        <button onclick="toggleCart()" class="relative p-2 text-slate-400 hover:text-white transition-colors">
                            <i data-lucide="shopping-cart" class="w-6 h-6"></i>
                            <span id="cart-count-desktop" class="cart-count absolute top-0 right-0 bg-red-500 text-white text-[10px] font-bold px-1.5 rounded-full scale-0 transition-transform duration-200">0</span>
                        </button>
                        
                        <!-- Auth Display (User Info) -->
                        <div id="auth-desktop">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <!-- Mobile menu button -->
                    <div class="md:hidden flex items-center gap-4">
                        <button onclick="toggleCart()" class="relative p-2 text-slate-400 hover:text-white">
                            <i data-lucide="shopping-cart" class="w-6 h-6"></i>
                            <span id="cart-count-mobile" class="cart-count absolute top-0 right-0 bg-red-500 text-white text-[10px] font-bold px-1.5 rounded-full scale-0 transition-transform duration-200">0</span>
                        </button>
                        <button id="mobile-menu-btn" class="inline-flex items-center justify-center p-2 rounded-md text-slate-400 hover:text-white hover:bg-slate-800 focus:outline-none">
                            <i data-lucide="menu" class="h-6 w-6" id="menu-icon"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Menu Panel -->
            <div id="mobile-menu" class="hidden md:hidden bg-slate-900 border-b border-white/10">
                <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                    <a href="index.html" class="text-slate-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Home</a>
                    <a href="#" onclick="filterCategory('ranks')" class="text-emerald-400 font-bold block px-3 py-2 rounded-md text-base">Store</a>
                    <!-- Updated Support Link Mobile -->
                    <a href="#" onclick="filterCategory('support')" class="text-slate-300 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Support</a>
                    
                    <!-- Mobile Auth Section -->
                    <div id="auth-mobile" class="mt-4 px-3">
                         <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </nav>

        <!-- Header Store -->
        <header class="pt-32 pb-12 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] bg-slate-900 border-b border-white/5 relative">
            <div class="absolute inset-0 bg-gradient-to-b from-transparent to-slate-950"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center">
                <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-4">Server Store</h1>
                <p class="text-slate-400 max-w-2xl mx-auto text-lg">
                    Dukung perkembangan NeedTwoGo dengan membeli Rank, Keys, atau Item eksklusif. 
                    <span class="text-emerald-400 font-bold">100% aman.</span>
                </p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow py-12">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex flex-col lg:flex-row gap-8">
                
                <!-- Sidebar Categories -->
                <aside class="w-full lg:w-64 flex-shrink-0">
                    <div class="bg-slate-900 rounded-xl border border-white/5 p-4 sticky top-24">
                        <h3 class="text-slate-500 text-xs font-bold uppercase tracking-wider mb-4 ml-2">Categories</h3>
                        <nav class="space-y-1">
                            <button onclick="filterCategory('ranks')" class="w-full flex items-center justify-between px-4 py-3 text-left bg-emerald-600 text-white rounded-lg font-bold shadow-lg shadow-emerald-900/20 transition-all cat-btn" data-cat="ranks">
                                <span class="flex items-center gap-3">
                                    <i data-lucide="crown" class="w-4 h-4"></i> Ranks
                                </span>
                                <i data-lucide="chevron-right" class="w-4 h-4"></i>
                            </button>
                            <button onclick="filterCategory('keys')" class="w-full flex items-center justify-between px-4 py-3 text-left text-slate-400 hover:bg-slate-800 hover:text-white rounded-lg font-medium transition-all cat-btn" data-cat="keys">
                                <span class="flex items-center gap-3">
                                    <i data-lucide="key" class="w-4 h-4"></i> Crate Keys
                                </span>
                            </button>
                            <button onclick="filterCategory('coins')" class="w-full flex items-center justify-between px-4 py-3 text-left text-slate-400 hover:bg-slate-800 hover:text-white rounded-lg font-medium transition-all cat-btn" data-cat="coins">
                                <span class="flex items-center gap-3">
                                    <i data-lucide="coins" class="w-4 h-4"></i> Coins
                                </span>
                            </button>
                            <button onclick="filterCategory('unban')" class="w-full flex items-center justify-between px-4 py-3 text-left text-slate-400 hover:bg-slate-800 hover:text-white rounded-lg font-medium transition-all cat-btn" data-cat="unban">
                                <span class="flex items-center gap-3">
                                    <i data-lucide="shield-alert" class="w-4 h-4"></i> Unban Request
                                </span>
                            </button>
                            <!-- New Support Category -->
                            <button onclick="filterCategory('support')" class="w-full flex items-center justify-between px-4 py-3 text-left text-slate-400 hover:bg-slate-800 hover:text-white rounded-lg font-medium transition-all cat-btn" data-cat="support">
                                <span class="flex items-center gap-3">
                                    <i data-lucide="life-buoy" class="w-4 h-4"></i> Support
                                </span>
                            </button>
                        </nav>

                        <!-- Top Donator Widget (DYNAMIC IDS ADDED) -->
                        <div class="mt-8 p-4 bg-emerald-900/20 rounded-lg border border-emerald-500/20 text-center">
                            <i data-lucide="gift" class="w-8 h-8 text-emerald-400 mx-auto mb-2"></i>
                            <h4 class="text-white font-bold text-sm mb-1">Top Donator</h4>
                            <p class="text-slate-400 text-xs mb-3">Bulan Ini</p>
                            <div class="flex items-center justify-center gap-2">
                                <img id="top-donator-img" src="" class="w-6 h-6 rounded animate-pulse bg-slate-700">
                                <span id="top-donator-name" class="text-emerald-300 font-bold text-sm">Loading...</span>
                            </div>
                        </div>
                    </div>
                </aside>

                                <!-- Product Grid -->
                <div class="flex-1">
                    <!-- Ranks Section -->
                    <div id="ranks" class="category-section">
                        <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                            <i data-lucide="crown" class="text-emerald-500"></i> Ranks
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            
                            <!-- VIP Rank -->
                        <div class="bg-slate-900 rounded-xl border border-blue-500/30 overflow-hidden group hover:border-blue-400 transition-all hover:-translate-y-1 relative">
                                <div class="absolute top-0 right-0 bg-blue-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg z-20">POPULAR</div>
                                <div class="h-32 bg-gradient-to-br from-green-900 to-slate-900 flex items-center justify-center relative">
                                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                                    <h3 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-green-300 to-green-600 drop-shadow-lg z-10">VIP</h3>
                                </div>
                            <div class="p-6">
                                <ul class="space-y-2 text-sm text-slate-400 mb-8">
                                    <li class="flex items-center gap-2 text-yellow-400 font-bold bg-yellow-400/10 p-1.5 rounded-lg w-fit mb-3"><i data-lucide="clock" class="w-3 h-3"></i> Berlaku 1 Bulan</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-green-500"></i> Prefix [VIP] di chat</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-green-500"></i> 32x Set Home</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-green-500"></i> Rewards VIP</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-blue-500"></i> +1M Money</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-purple-500"></i> Prioritas Antrian</li>
                                <div class="flex items-center justify-between mt-auto">
                                    <span class="text-xl font-bold text-white">Rp 10.000</span>
                                    <button onclick="addToCart('VIP Rank (30 Hari)', 10000)" class="bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-emerald-900/50 flex items-center gap-2">
                                        <i data-lucide="shopping-cart" class="w-4 h-4"></i> Add to Cart
                                    </button>
                                </div>
                            </div>
                        </div>

                            <!-- MVP Rank -->
                            <!-- <div class="bg-slate-900 rounded-xl border border-blue-500/30 overflow-hidden group hover:border-blue-400 transition-all hover:-translate-y-1 relative">
                                <div class="absolute top-0 right-0 bg-blue-500 text-white text-[10px] font-bold px-2 py-1 rounded-bl-lg z-20">POPULAR</div>
                                <div class="h-32 bg-gradient-to-br from-blue-900 to-slate-900 flex items-center justify-center relative">
                                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                                    <h3 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-blue-300 to-blue-600 drop-shadow-lg z-10">MVP</h3>
                                </div>
                                <div class="p-6">
                                    <ul class="space-y-2 text-sm text-slate-400 mb-6">
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-blue-500"></i> Semua Fitur VIP</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-blue-500"></i> Prefix [MVP] Keren</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-blue-500"></i> Akses /fly (Lobby)</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-blue-500"></i> 5x Set Home</li>
                                    </ul>
                                    <div class="flex items-center justify-between mt-auto">
                                        <span class="text-xl font-bold text-white">Rp 50.000</span>
                                        <button onclick="addToCart('MVP Rank', 50000)" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-blue-900/50 flex items-center gap-2">
                                            <i data-lucide="shopping-cart" class="w-4 h-4"></i> Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div> -->

                            <!-- LEGEND Rank -->
                            <!-- <div class="bg-slate-900 rounded-xl border border-purple-500/30 overflow-hidden group hover:border-purple-400 transition-all hover:-translate-y-1">
                                <div class="h-32 bg-gradient-to-br from-purple-900 to-slate-900 flex items-center justify-center relative">
                                    <div class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20"></div>
                                    <h3 class="text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-b from-purple-300 to-purple-600 drop-shadow-lg z-10">LEGEND</h3>
                                </div>
                                <div class="p-6">
                                    <ul class="space-y-2 text-sm text-slate-400 mb-6">
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-purple-500"></i> Semua Fitur MVP</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-purple-500"></i> Akses /god (Cooldown)</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-purple-500"></i> 10x Set Home</li>
                                        <li class="flex items-center gap-2"><i data-lucide="check" class="w-3 h-3 text-purple-500"></i> Prioritas Antrian</li>
                                    </ul>
                                    <div class="flex items-center justify-between mt-auto">
                                        <span class="text-xl font-bold text-white">Rp 100.000</span>
                                        <button onclick="addToCart('LEGEND Rank', 100000)" class="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-bold text-sm transition-colors shadow-lg shadow-purple-900/50 flex items-center gap-2">
                                            <i data-lucide="shopping-cart" class="w-4 h-4"></i> Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div> -->

                        </div>
                    </div>

                    <!-- Keys Section -->
                    <div id="keys" class="category-section hidden">
                        <!-- <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                            <i data-lucide="key" class="text-yellow-500"></i> Crate Keys
                        </h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                            <div class="bg-slate-900 rounded-xl border border-white/5 p-6 hover:border-yellow-500/50 transition-colors">
                                <div class="w-12 h-12 bg-yellow-900/30 rounded-lg flex items-center justify-center text-yellow-400 mb-4">
                                    <i data-lucide="key" class="w-6 h-6"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2">Common Crate Key (x5)</h3>
                                <p class="text-slate-400 text-sm mb-4">Kunci standar untuk peti Common. Dapatkan item dasar.</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-white font-bold">Rp 10.000</span>
                                    <button onclick="addToCart('Common Crate Key (x5)', 10000)" class="bg-slate-800 hover:bg-slate-700 text-white px-3 py-1.5 rounded text-sm font-bold border border-slate-700 flex items-center gap-2">
                                        <i data-lucide="plus" class="w-4 h-4"></i> Add
                                    </button>
                                </div>
                            </div>
                            <div class="bg-slate-900 rounded-xl border border-white/5 p-6 hover:border-yellow-500/50 transition-colors">
                                <div class="w-12 h-12 bg-yellow-900/30 rounded-lg flex items-center justify-center text-yellow-400 mb-4">
                                    <i data-lucide="key" class="w-6 h-6"></i>
                                </div>
                                <h3 class="text-lg font-bold text-white mb-2">Rare Crate Key (x3)</h3>
                                <p class="text-slate-400 text-sm mb-4">Kesempatan mendapatkan Enchanted Books dan Gear.</p>
                                <div class="flex items-center justify-between">
                                    <span class="text-white font-bold">Rp 25.000</span>
                                    <button onclick="addToCart('Rare Crate Key (x3)', 25000)" class="bg-slate-800 hover:bg-slate-700 text-white px-3 py-1.5 rounded text-sm font-bold border border-slate-700 flex items-center gap-2">
                                        <i data-lucide="plus" class="w-4 h-4"></i> Add
                                    </button>
                                </div>
                            </div>
                        </div> -->
                        <div class="bg-slate-900 rounded-xl border border-dashed border-slate-700 p-12 text-center">
                            <p class="text-slate-500">Produk Keys akan segera tersedia!</p>
                        </div>
                    </div>
                    
                    <!-- Coins Section (Placeholder) -->
                    <div id="coins" class="category-section hidden">
                        <div class="bg-slate-900 rounded-xl border border-dashed border-slate-700 p-12 text-center">
                            <p class="text-slate-500">Produk Coin akan segera tersedia!</p>
                        </div>
                    </div>

                    <!-- Unban Request Section -->
                    <div id="unban" class="category-section hidden">
                        <div class="bg-slate-900 rounded-xl border border-white/5 p-8">
                            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                                <i data-lucide="shield-alert" class="text-red-500"></i> Unban Request
                            </h2>
                            
                            <div class="bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6">
                                <p class="text-red-400 text-sm">
                                    <strong>Penting:</strong> Jujurlah dalam mengajukan banding. Kebohongan akan mengakibatkan permohonan ditolak permanen.
                                </p>
                            </div>

                            <!-- Formspree dengan AJAX Handler untuk mencegah refresh -->
                            <form id="unban-form" action="https://formspree.io/f/mqekqzjv" method="POST" onsubmit="handleUnbanSubmit(event)" class="space-y-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <label class="block text-slate-400 text-sm font-medium mb-2">Minecraft Username</label>
                                        <input type="text" name="username" id="unban-username" required 
                                            class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors" 
                                            placeholder="Username yang di-banned">
                                    </div>
                                    <div>
                                        <label class="block text-slate-400 text-sm font-medium mb-2">Email Kontak</label>
                                        <input type="email" name="email" required 
                                            class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors" 
                                            placeholder="email@contoh.com">
                                    </div>
                                </div>
                                <div>
                                    <label class="block text-slate-400 text-sm font-medium mb-2">Kapan Anda di-banned?</label>
                                    <input type="date" name="ban_date" class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors">
                                </div>
                                <div>
                                    <label class="block text-slate-400 text-sm font-medium mb-2">Alasan Banding (Jelaskan Kronologi)</label>
                                    <textarea name="message" rows="5" required
                                        class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors"
                                        placeholder="Jelaskan mengapa kami harus membuka banned Anda..."></textarea>
                                </div>
                                <button type="submit" id="unban-submit-btn" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-emerald-900/50 transition-all transform hover:-translate-y-0.5 flex items-center justify-center gap-2">
                                    <i data-lucide="send" class="w-4 h-4"></i> Kirim Permohonan
                                </button>
                            </form>
                        </div>
                    </div>

                    <!-- SUPPORT SECTION (NEW) -->
                    <div id="support" class="category-section hidden">
                        <div class="bg-slate-900 rounded-xl border border-white/5 p-8">
                            <h2 class="text-2xl font-bold text-white mb-6 flex items-center gap-2">
                                <i data-lucide="life-buoy" class="text-blue-500"></i> Pusat Bantuan
                            </h2>
                            
                            <!-- Contact Options -->
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                <a href="#" class="bg-[#5865F2]/10 border border-[#5865F2]/20 p-6 rounded-xl hover:bg-[#5865F2]/20 transition-all group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 bg-[#5865F2] rounded-lg flex items-center justify-center text-white group-hover:scale-110 transition-transform">
                                            <i data-lucide="message-circle" class="w-6 h-6"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-white font-bold">Discord Support</h3>
                                            <p class="text-slate-400 text-sm">Buat tiket untuk bantuan teknis.</p>
                                        </div>
                                    </div>
                                </a>
                                <a href="https://wa.me/6282210874011" target="_blank" class="bg-[#25D366]/10 border border-[#25D366]/20 p-6 rounded-xl hover:bg-[#25D366]/20 transition-all group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 bg-[#25D366] rounded-lg flex items-center justify-center text-white group-hover:scale-110 transition-transform">
                                            <i data-lucide="phone" class="w-6 h-6"></i>
                                        </div>
                                        <div>
                                            <h3 class="text-white font-bold">WhatsApp Admin</h3>
                                            <p class="text-slate-400 text-sm">Chat langsung untuk konfirmasi pembayaran.</p>
                                        </div>
                                    </div>
                                </a>
                            </div>

                            <!-- FAQ -->
                            <h3 class="text-xl font-bold text-white mb-4">Sering Ditanyakan (FAQ)</h3>
                            <div class="space-y-3">
                                <details class="bg-slate-950 border border-slate-800 rounded-lg group">
                                    <summary class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-300 hover:text-white list-none">
                                        <span>Berapa lama rank aktif setelah pembayaran?</span>
                                        <i data-lucide="chevron-down" class="w-4 h-4 transition-transform group-open:rotate-180"></i>
                                    </summary>
                                    <div class="px-4 pb-4 text-slate-400 text-sm leading-relaxed">
                                        Biasanya instan atau maksimal 15-60 menit setelah konfirmasi pembayaran manual oleh Admin. Pastikan Anda sedang online di server saat Admin memproses pesanan.
                                        Tapi tergantung kalo admin nya tidak tidur atau ada urusan diluar dari server makan bisa lebih dari 4 jam.
                                    </div>
                                </details>
                                <details class="bg-slate-950 border border-slate-800 rounded-lg group">
                                    <summary class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-300 hover:text-white list-none">
                                        <span>Apakah rank bersifat permanen?</span>
                                        <i data-lucide="chevron-down" class="w-4 h-4 transition-transform group-open:rotate-180"></i>
                                    </summary>
                                    <div class="px-4 pb-4 text-slate-400 text-sm leading-relaxed">
                                        Tidak, rank di server NeedTwoGo bersifat langganan bulanan (30 hari). Anda perlu memperpanjangnya jika masa aktif habis.
                                    </div>
                                </details>
                                 <details class="bg-slate-950 border border-slate-800 rounded-lg group">
                                    <summary class="flex justify-between items-center p-4 cursor-pointer font-medium text-slate-300 hover:text-white list-none">
                                        <span>Saya salah memasukkan username, bagaimana?</span>
                                        <i data-lucide="chevron-down" class="w-4 h-4 transition-transform group-open:rotate-180"></i>
                                    </summary>
                                    <div class="px-4 pb-4 text-slate-400 text-sm leading-relaxed">
                                        Segera hubungi Admin melalui WhatsApp atau Discord dengan menyertakan bukti pembayaran. Selama item belum dikirim, kami bisa mengubah tujuannya.
                                    </div>
                                </details>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-slate-950 border-t border-white/5 py-12 mt-auto">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex items-center gap-2">
                        <img src="https://n2g.my.id/asset/server-icon2.png" alt="Server Icon" class="w-8 h-8 rounded object-cover">
                        <span class="text-slate-300 font-bold tracking-wide">NeedTwoGo</span>
                    </div>
                    
                    <div class="text-slate-500 text-sm">
                        &copy; 2026 NeedTwoGo. All purchases are final. Not affiliated with Mojang.
                    </div>
                </div>
            </div>
        </footer>
    </div>
    <!-- END WRAPPER -->

    <!-- Cart Modal (Overlay) -->
    <div id="cart-modal" class="fixed inset-0 z-[60] hidden">
        <!-- Backdrop -->
        <div onclick="toggleCart()" class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity"></div>
        
        <!-- Modal Content -->
        <div class="absolute right-0 top-0 h-full w-full max-w-md bg-slate-900 border-l border-white/10 shadow-2xl transform transition-transform duration-300 flex flex-col">
            <!-- Header -->
            <div class="flex items-center justify-between p-6 border-b border-white/5 bg-slate-950/50">
                <h2 class="text-xl font-bold text-white flex items-center gap-2">
                    <i data-lucide="shopping-cart" class="text-emerald-400"></i> Keranjang
                </h2>
                <button onclick="toggleCart()" class="text-slate-400 hover:text-white transition-colors">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <!-- Items -->
            <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4">
                <div class="text-center py-12 text-slate-500 flex flex-col items-center">
                    <i data-lucide="shopping-bag" class="w-12 h-12 mb-4 opacity-50"></i>
                    <p>Keranjang kamu masih kosong.</p>
                </div>
            </div>

            <!-- Footer / Checkout -->
            <div class="p-6 border-t border-white/5 bg-slate-950">
                <div class="flex justify-between items-center mb-6">
                    <span class="text-slate-400">Total Pembayaran</span>
                    <span id="cart-total" class="text-2xl font-bold text-emerald-400">Rp 0</span>
                </div>
                <button onclick="initiatePayment()" class="w-full bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-emerald-900/20">
                    <i data-lucide="credit-card" class="w-6 h-6"></i>
                    Checkout
                </button>
                <p class="text-center text-xs text-slate-500 mt-3">
                    Metode pembayaran via QRIS tersedia.
                </p>
            </div>
        </div>
    </div>

    <!-- PAYMENT MODAL (NEW) - FIXED RESPONSIVE -->
    <div id="payment-modal" class="fixed inset-0 z-[70] hidden flex items-center justify-center px-4 py-6">
        <!-- Backdrop -->
        <div onclick="closePaymentModal()" class="absolute inset-0 bg-black/80 backdrop-blur-md transition-opacity"></div>
        
        <!-- Modal Content - Added max-h, overflow, and scrolling -->
        <div class="relative w-full max-w-md max-h-[90vh] overflow-y-auto bg-slate-900 rounded-2xl border border-white/10 shadow-2xl p-4 sm:p-6 flex flex-col items-center animate-fade-in-up">
            
            <div class="flex justify-between items-center w-full mb-6">
                <h3 class="text-xl font-bold text-white flex items-center gap-2">
                    <i data-lucide="qr-code" class="text-emerald-400"></i> Scan QRIS
                </h3>
                <button onclick="closePaymentModal()" class="text-slate-400 hover:text-white bg-slate-800 p-1 rounded-lg">
                    <i data-lucide="x" class="w-5 h-5"></i>
                </button>
            </div>

            <!-- QR Code Full Image - Adjusted for Mobile -->
            <div class="mb-6 w-full flex justify-center">
                <!-- Image width full but constrained by container, rounded, and responsive height -->
                <img src="asset/Qris.webp" alt="QRIS Code" class="w-full h-auto max-w-[350px] rounded-xl shadow-lg border-4 border-white object-contain">
            </div>

            <div class="text-center mb-6 w-full">
                <p class="text-slate-400 text-sm mb-2">Total Pembayaran:</p>
                <div class="text-3xl font-extrabold text-emerald-400 bg-emerald-900/20 py-2 rounded-lg border border-emerald-500/20 mb-2">
                    <span id="payment-total-amount">Rp 0</span>
                </div>
                <p class="text-xs text-slate-500">
                    Scan QR di atas menggunakan aplikasi E-Wallet / Banking Anda.
                </p>
            </div>

            <button onclick="finalizeCheckout()" class="w-full bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold py-4 rounded-xl flex items-center justify-center gap-3 transition-all shadow-lg shadow-emerald-900/20 mb-3">
                <i data-lucide="check-circle" class="w-5 h-5"></i>
                Konfirmasi Pembayaran (WhatsApp)
            </button>
            
            <button onclick="closePaymentModal()" class="w-full text-slate-400 hover:text-white py-2 text-sm font-medium transition-colors">
                Batal / Kembali
            </button>
        </div>
    </div>

    <!-- Login Modal (Manual Trigger) - UPDATED RESPONSIVE -->
    <div id="login-modal" class="fixed inset-0 z-[60] hidden flex items-center justify-center px-4">
        <!-- Backdrop -->
        <div onclick="toggleLoginModal()" class="absolute inset-0 bg-black/60 backdrop-blur-sm transition-opacity"></div>
        
        <!-- Modal Content - Added scroll -->
        <div class="relative w-full max-w-sm max-h-[90vh] overflow-y-auto bg-slate-900 rounded-xl border border-white/10 shadow-2xl p-6 animate-fade-in-up">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-white">Login Pemain</h3>
                <button onclick="toggleLoginModal()" class="text-slate-400 hover:text-white"><i data-lucide="x" class="w-6 h-6"></i></button>
            </div>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-slate-400 text-sm font-medium mb-2">Username Minecraft</label>
                    <input type="text" id="mc-username-input" class="w-full bg-slate-950 border border-slate-700 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-emerald-500 transition-colors" placeholder="Contoh: Steve">
                </div>
                <button onclick="handleLogin()" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-lg shadow-lg shadow-emerald-900/50 transition-all transform hover:-translate-y-0.5">
                    Masuk
                </button>
                <p class="text-xs text-slate-500 text-center mt-2">
                    Kami tidak meminta password. Hanya username untuk verifikasi pembelian.
                </p>
            </div>
        </div>
    </div>

    <!-- Toast Notification (UPDATED Z-INDEX AND RESPONSIVE) -->
    <div id="toast" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-emerald-600 text-white px-6 py-3 rounded-full shadow-xl flex items-center gap-3 z-[110] hidden opacity-0 transition-opacity duration-300 w-max max-w-[90vw] whitespace-nowrap mb-4 sm:mb-0">
        <i data-lucide="check-circle" class="w-5 h-5 flex-shrink-0"></i>
        <span id="toast-message" class="font-medium text-sm sm:text-base truncate">Item ditambahkan!</span>
    </div>

    <script>
        lucide.createIcons();
        
        // --- DATA ---
        let cart = [];
        let currentUser = null; 
        const ADMIN_WA = "6282210874011";

        let mockDonators = [
            { name: "Sultan_Indo", amount: 1500000 },
            { name: "Miner_Pro_99", amount: 500000 },
            { name: "CraftMaster", amount: 750000 },
            { name: "RedstoneKing", amount: 2000000 } 
        ];

        function initTopDonator() {
            const topDonator = mockDonators.sort((a, b) => b.amount - a.amount)[0];
            const imgEl = document.getElementById('top-donator-img');
            const nameEl = document.getElementById('top-donator-name');
            
            if(imgEl && nameEl && topDonator) {
                imgEl.classList.remove('animate-pulse', 'bg-slate-700');
                imgEl.src = `https://minotar.net/avatar/${topDonator.name}`;
                nameEl.innerText = topDonator.name;
            }
        }

        async function handleUnbanSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const formData = new FormData(form);
            const submitBtn = document.getElementById('unban-submit-btn');
            const originalBtnText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i data-lucide="loader-2" class="w-4 h-4 animate-spin"></i> Mengirim...';
            submitBtn.disabled = true;
            lucide.createIcons(); 

            try {
                const response = await fetch(form.action, {
                    method: form.method,
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                });

                if (response.ok) {
                    showToast("Permohonan terkirim! Cek email kamu.");
                    form.reset(); 
                    if(currentUser) document.getElementById('unban-username').value = currentUser;
                } else {
                    const data = await response.json();
                    if (Object.hasOwn(data, 'errors')) {
                        showToast(data["errors"].map(error => error["message"]).join(", "), true);
                    } else {
                        showToast("Gagal mengirim permohonan. Coba lagi.", true);
                    }
                }
            } catch (error) {
                showToast("Terjadi kesalahan jaringan.", true);
                console.error('Error:', error);
            } finally {
                submitBtn.innerHTML = originalBtnText;
                submitBtn.disabled = false;
                lucide.createIcons();
            }
        }

        function initAuth() {
            const savedUser = localStorage.getItem('n2g_store_user');
            if (savedUser) {
                currentUser = savedUser;
                unlockStore();
                updateAuthUI();
            } else {
                lockStore();
            }
        }

        function handleGateLogin() {
            const input = document.getElementById('gate-username-input');
            const username = input.value.trim();
            if (!username) {
                alert("Masukkan username terlebih dahulu!");
                return;
            }
            currentUser = username;
            localStorage.setItem('n2g_store_user', username);
            unlockStore();
            updateAuthUI();
            showToast(`Selamat datang, ${currentUser}!`);
        }

        function lockStore() {
            const gate = document.getElementById('auth-gate');
            const app = document.getElementById('app-container');
            gate.classList.remove('opacity-0', 'pointer-events-none');
            app.classList.add('filter', 'blur-sm', 'pointer-events-none', 'opacity-50');
        }

        function unlockStore() {
            const gate = document.getElementById('auth-gate');
            const app = document.getElementById('app-container');
            gate.classList.add('opacity-0', 'pointer-events-none');
            app.classList.remove('filter', 'blur-sm', 'pointer-events-none', 'opacity-50');
        }

        function toggleUserDropdown() {
            const dropdown = document.getElementById('user-dropdown');
            if(dropdown) dropdown.classList.toggle('hidden');
        }
        
        window.addEventListener('click', (e) => {
            const dropdown = document.getElementById('user-dropdown');
            const profileBtn = document.getElementById('profile-btn');
            if (dropdown && profileBtn && !profileBtn.contains(e.target) && !dropdown.contains(e.target)) {
                dropdown.classList.add('hidden');
            }
        });

        function logout() {
            if(confirm("Yakin ingin logout?")) {
                currentUser = null;
                localStorage.removeItem('n2g_store_user');
                lockStore();
                document.getElementById('gate-username-input').value = ""; 
                cart = []; 
                updateCartUI();
                const dropdown = document.getElementById('user-dropdown');
                if(dropdown) dropdown.classList.add('hidden');
            }
        }

        function updateAuthUI() {
            const desktopAuth = document.getElementById('auth-desktop');
            const mobileAuth = document.getElementById('auth-mobile');

            if (currentUser) {
                const userHtml = `
                    <div class="relative">
                        <div id="profile-btn" onclick="toggleUserDropdown()" class="flex items-center gap-3 bg-slate-800/80 rounded-lg pl-2 pr-4 py-1.5 border border-slate-700 cursor-pointer hover:bg-slate-800 transition-colors select-none">
                            <img src="https://minotar.net/avatar/${currentUser}" class="w-8 h-8 rounded bg-slate-700" alt="${currentUser}">
                            <div class="flex flex-col">
                                <span class="font-bold text-sm text-white leading-none">${currentUser}</span>
                                <span class="text-[10px] text-emerald-400 font-medium">Online</span>
                            </div>
                            <i data-lucide="chevron-down" class="w-4 h-4 text-slate-400 ml-1"></i>
                        </div>
                        <div id="user-dropdown" class="absolute right-0 mt-2 w-48 bg-slate-900 rounded-xl border border-white/10 shadow-xl py-2 hidden z-50 animate-fade-in-up">
                            <div class="px-4 py-2 border-b border-white/5 mb-1">
                                <p class="text-xs text-slate-500">Login sebagai</p>
                                <p class="text-sm font-bold text-white truncate">${currentUser}</p>
                            </div>
                            </a>
                            <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-red-500/10 hover:text-red-300 transition-colors">
                                <i data-lucide="log-out" class="inline-block w-4 h-4 mr-2"></i> Logout
                            </button>
                        </div>
                    </div>
                `;
                desktopAuth.innerHTML = userHtml;
                mobileAuth.innerHTML = `
                    <div class="flex items-center justify-between gap-3 bg-slate-800 rounded-lg p-3 border border-slate-700">
                         <div class="flex items-center gap-3">
                             <img src="https://minotar.net/avatar/${currentUser}" class="w-10 h-10 rounded bg-slate-700">
                             <div>
                                <div class="font-bold text-white">${currentUser}</div>
                                <div class="text-xs text-emerald-400">Online</div>
                             </div>
                         </div>
                         <button onclick="logout()" class="p-2 bg-red-500/10 text-red-400 rounded-lg">
                            <i data-lucide="log-out" class="w-5 h-5"></i>
                         </button>
                    </div>
                `;
            } else {
                // Template for Logged Out
                const loginBtnHtml = `
                    <button onclick="toggleLoginModal()" class="bg-slate-800 hover:bg-slate-700 text-white px-5 py-2 rounded font-bold transition-all border border-slate-700 text-sm flex items-center gap-2">
                        <i data-lucide="log-in" class="w-4 h-4"></i> Login
                    </button>
                `;

                desktopAuth.innerHTML = loginBtnHtml;
                mobileAuth.innerHTML = `
                     <button onclick="toggleLoginModal()" class="w-full bg-slate-800 hover:bg-slate-700 text-white px-5 py-3 rounded font-bold transition-all border border-slate-700 text-base flex items-center justify-center gap-2">
                        <i data-lucide="log-in" class="w-4 h-4"></i> Login
                    </button>
                `;
            }
            lucide.createIcons();
        }

        function addToCart(name, price) {
            cart.push({ name, price });
            updateCartUI();
            showToast(`Berhasil menambahkan ${name}`);
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function updateCartUI() {
            const count = cart.length;
            const badges = document.querySelectorAll('.cart-count');
            
            badges.forEach(el => {
                el.innerText = count;
                if (count > 0) {
                    el.classList.remove('scale-0');
                    el.classList.add('scale-100');
                } else {
                    el.classList.add('scale-0');
                    el.classList.remove('scale-100');
                }
            });

            const container = document.getElementById('cart-items');
            const totalEl = document.getElementById('cart-total');
            let total = 0;

            if (cart.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-slate-500 flex flex-col items-center animate-fade-in-up">
                        <i data-lucide="shopping-bag" class="w-16 h-16 mb-4 opacity-30"></i>
                        <p class="text-lg font-medium">Keranjang kamu kosong</p>
                        <p class="text-sm">Yuk pilih item keren buat server!</p>
                    </div>
                `;
            } else {
                container.innerHTML = '';
                cart.forEach((item, index) => {
                    total += item.price;
                    container.innerHTML += `
                        <div class="flex justify-between items-center bg-slate-800/50 p-4 rounded-xl border border-white/5 animate-fade-in-up" style="animation-delay: ${index * 50}ms">
                            <div class="flex items-center gap-4">
                                <div class="w-10 h-10 bg-slate-800 rounded-lg flex items-center justify-center text-emerald-400">
                                    <i data-lucide="package" class="w-5 h-5"></i>
                                </div>
                                <div>
                                    <div class="font-bold text-white text-sm">${item.name}</div>
                                    <div class="text-emerald-400 text-xs">Rp ${item.price.toLocaleString('id-ID')}</div>
                                </div>
                            </div>
                            <button onclick="removeFromCart(${index})" class="p-2 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition-colors" title="Hapus">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                            </button>
                        </div>
                    `;
                });
            }

            totalEl.innerText = 'Rp ' + total.toLocaleString('id-ID');
            lucide.createIcons(); 
        }

        function toggleCart() {
            const modal = document.getElementById('cart-modal');
            const isHidden = modal.classList.contains('hidden');
            if (isHidden) {
                modal.classList.remove('hidden');
                updateCartUI(); 
            } else {
                modal.classList.add('hidden');
            }
        }

        // --- NEW PAYMENT LOGIC ---

        function initiatePayment() {
            if (cart.length === 0) {
                showToast("Keranjang kosong!", true);
                return;
            }

            let total = 0;
            cart.forEach(item => total += item.price);

            // Update Total di Modal
            document.getElementById('payment-total-amount').innerText = 'Rp ' + total.toLocaleString('id-ID');

            // Buka Modal Payment
            document.getElementById('payment-modal').classList.remove('hidden');
            
            // Tutup Cart (Opsional, supaya fokus)
            // document.getElementById('cart-modal').classList.add('hidden');
        }

        function closePaymentModal() {
            document.getElementById('payment-modal').classList.add('hidden');
        }

        function finalizeCheckout() {
            let message = `*Halo Admin NeedTwoGo, saya ingin membeli item berikut:*\n`;
            message += ` *Username:* ${currentUser}\n`;
            message += ` *Metode:* QRIS (Sudah Bayar)\n\n`;
            
            let total = 0;
            cart.forEach(item => {
                message += ` ${item.name} - Rp ${item.price.toLocaleString('id-ID')}\n`;
                total += item.price;
            });

            message += `\n *Total: Rp ${total.toLocaleString('id-ID')}*`;
            message += `\n\nMohon diproses, terima kasih!`;

            const url = `https://wa.me/${ADMIN_WA}?text=${encodeURIComponent(message)}`;
            
            // Update Top Donator Simulation
            const existingDonor = mockDonators.find(d => d.name === currentUser);
            if (existingDonor) {
                existingDonor.amount += total;
            } else {
                mockDonators.push({ name: currentUser, amount: total });
            }
            initTopDonator();

            // Clear & Close
            cart = [];
            updateCartUI();
            toggleCart(); // Close Cart
            closePaymentModal(); // Close Payment Modal

            window.open(url, '_blank');
        }

        // --- UTILS ---

        function showToast(msg, isError = false) {
            const toast = document.getElementById('toast');
            const msgEl = document.getElementById('toast-message');
            msgEl.innerText = msg;
            toast.classList.remove('hidden');
            void toast.offsetWidth; 
            toast.classList.remove('opacity-0', 'translate-y-4');
            if(isError) {
                toast.classList.remove('bg-emerald-600');
                toast.classList.add('bg-red-600');
            } else {
                toast.classList.add('bg-emerald-600');
                toast.classList.remove('bg-red-600');
            }
            setTimeout(() => {
                toast.classList.add('opacity-0', 'translate-y-4');
                setTimeout(() => {
                    toast.classList.add('hidden');
                }, 300);
            }, 2000);
        }

        function filterCategory(catName) {
            document.querySelectorAll('.cat-btn').forEach(btn => {
                if(btn.dataset.cat === catName) {
                    btn.classList.remove('bg-transparent', 'text-slate-400', 'hover:bg-slate-800');
                    btn.classList.add('bg-emerald-600', 'text-white', 'shadow-lg');
                } else {
                    btn.classList.add('text-slate-400', 'hover:bg-slate-800');
                    btn.classList.remove('bg-emerald-600', 'text-white', 'shadow-lg');
                }
            });
            document.querySelectorAll('.category-section').forEach(sec => {
                sec.classList.add('hidden');
            });
            document.getElementById(catName).classList.remove('hidden');
            if (catName === 'unban' && currentUser) {
                const unbanInput = document.getElementById('unban-username');
                if (unbanInput && !unbanInput.value) {
                    unbanInput.value = currentUser;
                }
            }
        }

        const menuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        let isMenuOpen = false;
        menuBtn.addEventListener('click', () => {
            isMenuOpen = !isMenuOpen;
            mobileMenu.classList.toggle('hidden', !isMenuOpen);
        });

        function toggleLoginModal() {
            const modal = document.getElementById('login-modal');
            modal.classList.toggle('hidden');
            if(!modal.classList.contains('hidden')) {
                setTimeout(() => document.getElementById('mc-username-input').focus(), 100);
            }
        }

        function handleLogin() {
            const usernameInput = document.getElementById('mc-username-input');
            const username = usernameInput.value.trim();

            if (!username) {
                alert("Mohon masukkan username!");
                return;
            }

            currentUser = username;
            localStorage.setItem('n2g_store_user', username);
            updateAuthUI();
            toggleLoginModal();
            usernameInput.value = "";
            showToast(`Selamat datang, ${currentUser}!`);
        }

        initAuth();
        initTopDonator();

    </script>
    <!-- Script anti inspect element -->
<script src="js/antiinspectelement.js"></script>
</body>
</html>